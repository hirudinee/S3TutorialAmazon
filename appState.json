{"EDITOR_STATE":{"allProjectFiles":{"4a7438ea-0941-4df6-93c6-ad299b87b156":{"id":"4a7438ea-0941-4df6-93c6-ad299b87b156","parent":null,"name":"S3TutorialAmazon","type":"DIRECTORY","isDirectory":true,"children":["c1027809-aa5d-4f6b-b668-882a7e827eb9"],"isRemovable":false,"filePath":"S3TutorialAmazon"},"c1027809-aa5d-4f6b-b668-882a7e827eb9":{"id":"c1027809-aa5d-4f6b-b668-882a7e827eb9","parent":"4a7438ea-0941-4df6-93c6-ad299b87b156","name":"S3TutorialAmazon-lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"S3TutorialAmazon/S3TutorialAmazon-lambda.js","code":"let AWS = require('aws-sdk');\nconst s3 = new AWS.S3();\nexports.handler = function (event, context, callback) {\n\n    //Entered in to Lambda\n    console.log(\"Starting the lambda\");\n\n    //Get source folder name\n    var srcBucket = event.Records[0].s3.bucket.name;\n\n    //Get source key\n    var srcKey = decodeURIComponent(event.Records[0].s3.object.key.replace(/\\+/g, \"\"));\n\n    console.log(\"Source Bucket name\"+srcBucket);\n    console.log(\"Source Bucket key\"+srcKey);\n\n    //Get uploade Image type\n    var typeMatch = src.match(/\\.([^.]*)$/);\n\n    //No image type to determine\n    if(!typeMatch){\n        callback(\"Could not determine the image type\");\n        return;\n    }\n    console.log(\"Image type\"+typeMatch);\n\n    //Image type is not supported\n    var imageType = typeMatch[1];\n    if (imageType != \"jpg\" && imageType != \"png\") {\n        callback('Unsupported image type: ${imageType}');\n        return;\n    }\n    \n    s3.putObject({\n        \"Body\": \"data\",\n        \"Bucket\": \"hiru.sampleresized\",\n        \"Key\": \"samplekey\"\n    })\n        .promise()\n        .then(data => {\n            console.log(data);           // successful response\n            /*\n            data = {\n                ETag: \"\\\\\"6805f2cfc46c0f04559748bb039d69ae\\\\\"\", \n                VersionId: \"pSKidl4pHBiNwukdbcPXAIs.sshFFOc0\"\n            }\n            */\n        })\n        .catch(err => {\n            console.log(err, err.stack); // an error occurred\n        });\n\n\n}","ast":{"type":"File","start":0,"end":1449,"loc":{"start":{"line":1,"column":0},"end":{"line":54,"column":1}},"program":{"type":"Program","start":0,"end":1449,"loc":{"start":{"line":1,"column":0},"end":{"line":54,"column":1}},"sourceType":"module","body":[{"type":"VariableDeclaration","start":0,"end":29,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":29}},"declarations":[{"type":"VariableDeclarator","start":4,"end":28,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":28}},"id":{"type":"Identifier","start":4,"end":7,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":7},"identifierName":"AWS"},"name":"AWS"},"init":{"type":"CallExpression","start":10,"end":28,"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":28}},"callee":{"type":"Identifier","start":10,"end":17,"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":17},"identifierName":"require"},"name":"require"},"arguments":[{"type":"StringLiteral","start":18,"end":27,"loc":{"start":{"line":1,"column":18},"end":{"line":1,"column":27}},"extra":{"rawValue":"aws-sdk","raw":"'aws-sdk'"},"value":"aws-sdk"}]}}],"kind":"let"},{"type":"VariableDeclaration","start":30,"end":54,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":24}},"declarations":[{"type":"VariableDeclarator","start":36,"end":53,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":23}},"id":{"type":"Identifier","start":36,"end":38,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":8},"identifierName":"s3"},"name":"s3"},"init":{"type":"NewExpression","start":41,"end":53,"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":23}},"callee":{"type":"MemberExpression","start":45,"end":51,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":21}},"object":{"type":"Identifier","start":45,"end":48,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":18},"identifierName":"AWS"},"name":"AWS"},"property":{"type":"Identifier","start":49,"end":51,"loc":{"start":{"line":2,"column":19},"end":{"line":2,"column":21},"identifierName":"S3"},"name":"S3"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":55,"end":1449,"loc":{"start":{"line":3,"column":0},"end":{"line":54,"column":1}},"expression":{"type":"AssignmentExpression","start":55,"end":1449,"loc":{"start":{"line":3,"column":0},"end":{"line":54,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":55,"end":70,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":15}},"object":{"type":"Identifier","start":55,"end":62,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":7},"identifierName":"exports"},"name":"exports"},"property":{"type":"Identifier","start":63,"end":70,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":15},"identifierName":"handler"},"name":"handler"},"computed":false},"right":{"type":"FunctionExpression","start":73,"end":1449,"loc":{"start":{"line":3,"column":18},"end":{"line":54,"column":1}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":83,"end":88,"loc":{"start":{"line":3,"column":28},"end":{"line":3,"column":33},"identifierName":"event"},"name":"event"},{"type":"Identifier","start":90,"end":97,"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":42},"identifierName":"context"},"name":"context"},{"type":"Identifier","start":99,"end":107,"loc":{"start":{"line":3,"column":44},"end":{"line":3,"column":52},"identifierName":"callback"},"name":"callback"}],"body":{"type":"BlockStatement","start":109,"end":1449,"loc":{"start":{"line":3,"column":54},"end":{"line":54,"column":1}},"body":[{"type":"ExpressionStatement","start":143,"end":178,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":39}},"expression":{"type":"CallExpression","start":143,"end":177,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":38}},"callee":{"type":"MemberExpression","start":143,"end":154,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":15}},"object":{"type":"Identifier","start":143,"end":150,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":11},"identifierName":"console"},"name":"console","leadingComments":null},"property":{"type":"Identifier","start":151,"end":154,"loc":{"start":{"line":6,"column":12},"end":{"line":6,"column":15},"identifierName":"log"},"name":"log"},"computed":false,"leadingComments":null},"arguments":[{"type":"StringLiteral","start":155,"end":176,"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":37}},"extra":{"rawValue":"Starting the lambda","raw":"\"Starting the lambda\""},"value":"Starting the lambda"}],"leadingComments":null},"leadingComments":[{"type":"CommentLine","value":"Entered in to Lambda","start":116,"end":138,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":26}}}],"trailingComments":[{"type":"CommentLine","value":"Get source folder name","start":184,"end":208,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}}}]},{"type":"VariableDeclaration","start":213,"end":261,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":52}},"declarations":[{"type":"VariableDeclarator","start":217,"end":260,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":51}},"id":{"type":"Identifier","start":217,"end":226,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":17},"identifierName":"srcBucket"},"name":"srcBucket","leadingComments":null},"init":{"type":"MemberExpression","start":229,"end":260,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":51}},"object":{"type":"MemberExpression","start":229,"end":255,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":46}},"object":{"type":"MemberExpression","start":229,"end":248,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":39}},"object":{"type":"MemberExpression","start":229,"end":245,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":36}},"object":{"type":"MemberExpression","start":229,"end":242,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":33}},"object":{"type":"Identifier","start":229,"end":234,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":25},"identifierName":"event"},"name":"event"},"property":{"type":"Identifier","start":235,"end":242,"loc":{"start":{"line":9,"column":26},"end":{"line":9,"column":33},"identifierName":"Records"},"name":"Records"},"computed":false},"property":{"type":"NumericLiteral","start":243,"end":244,"loc":{"start":{"line":9,"column":34},"end":{"line":9,"column":35}},"extra":{"rawValue":0,"raw":"0"},"value":0},"computed":true},"property":{"type":"Identifier","start":246,"end":248,"loc":{"start":{"line":9,"column":37},"end":{"line":9,"column":39},"identifierName":"s3"},"name":"s3"},"computed":false},"property":{"type":"Identifier","start":249,"end":255,"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":46},"identifierName":"bucket"},"name":"bucket"},"computed":false},"property":{"type":"Identifier","start":256,"end":260,"loc":{"start":{"line":9,"column":47},"end":{"line":9,"column":51},"identifierName":"name"},"name":"name"},"computed":false},"leadingComments":null}],"kind":"var","leadingComments":[{"type":"CommentLine","value":"Get source folder name","start":184,"end":208,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}}}],"trailingComments":[{"type":"CommentLine","value":"Get source key","start":267,"end":283,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":20}}}]},{"type":"VariableDeclaration","start":288,"end":371,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":87}},"declarations":[{"type":"VariableDeclarator","start":292,"end":370,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":86}},"id":{"type":"Identifier","start":292,"end":298,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":14},"identifierName":"srcKey"},"name":"srcKey","leadingComments":null},"init":{"type":"CallExpression","start":301,"end":370,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":86}},"callee":{"type":"Identifier","start":301,"end":319,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":35},"identifierName":"decodeURIComponent"},"name":"decodeURIComponent"},"arguments":[{"type":"CallExpression","start":320,"end":369,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":85}},"callee":{"type":"MemberExpression","start":320,"end":358,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":74}},"object":{"type":"MemberExpression","start":320,"end":350,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":66}},"object":{"type":"MemberExpression","start":320,"end":346,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":62}},"object":{"type":"MemberExpression","start":320,"end":339,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":55}},"object":{"type":"MemberExpression","start":320,"end":336,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":52}},"object":{"type":"MemberExpression","start":320,"end":333,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":49}},"object":{"type":"Identifier","start":320,"end":325,"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":41},"identifierName":"event"},"name":"event"},"property":{"type":"Identifier","start":326,"end":333,"loc":{"start":{"line":12,"column":42},"end":{"line":12,"column":49},"identifierName":"Records"},"name":"Records"},"computed":false},"property":{"type":"NumericLiteral","start":334,"end":335,"loc":{"start":{"line":12,"column":50},"end":{"line":12,"column":51}},"extra":{"rawValue":0,"raw":"0"},"value":0},"computed":true},"property":{"type":"Identifier","start":337,"end":339,"loc":{"start":{"line":12,"column":53},"end":{"line":12,"column":55},"identifierName":"s3"},"name":"s3"},"computed":false},"property":{"type":"Identifier","start":340,"end":346,"loc":{"start":{"line":12,"column":56},"end":{"line":12,"column":62},"identifierName":"object"},"name":"object"},"computed":false},"property":{"type":"Identifier","start":347,"end":350,"loc":{"start":{"line":12,"column":63},"end":{"line":12,"column":66},"identifierName":"key"},"name":"key"},"computed":false},"property":{"type":"Identifier","start":351,"end":358,"loc":{"start":{"line":12,"column":67},"end":{"line":12,"column":74},"identifierName":"replace"},"name":"replace"},"computed":false},"arguments":[{"type":"RegExpLiteral","start":359,"end":364,"loc":{"start":{"line":12,"column":75},"end":{"line":12,"column":80}},"extra":{"raw":"/\\+/g"},"pattern":"\\+","flags":"g"},{"type":"StringLiteral","start":366,"end":368,"loc":{"start":{"line":12,"column":82},"end":{"line":12,"column":84}},"extra":{"rawValue":"","raw":"\"\""},"value":""}]}]},"leadingComments":null}],"kind":"var","leadingComments":[{"type":"CommentLine","value":"Get source key","start":267,"end":283,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":20}}}]},{"type":"ExpressionStatement","start":377,"end":421,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":48}},"expression":{"type":"CallExpression","start":377,"end":420,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":47}},"callee":{"type":"MemberExpression","start":377,"end":388,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":15}},"object":{"type":"Identifier","start":377,"end":384,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":11},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":385,"end":388,"loc":{"start":{"line":14,"column":12},"end":{"line":14,"column":15},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"BinaryExpression","start":389,"end":419,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":46}},"left":{"type":"StringLiteral","start":389,"end":409,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":36}},"extra":{"rawValue":"Source Bucket name","raw":"\"Source Bucket name\""},"value":"Source Bucket name"},"operator":"+","right":{"type":"Identifier","start":410,"end":419,"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":46},"identifierName":"srcBucket"},"name":"srcBucket"}}]}},{"type":"ExpressionStatement","start":426,"end":466,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":44}},"expression":{"type":"CallExpression","start":426,"end":465,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":43}},"callee":{"type":"MemberExpression","start":426,"end":437,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":15}},"object":{"type":"Identifier","start":426,"end":433,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":11},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":434,"end":437,"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":15},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"BinaryExpression","start":438,"end":464,"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":42}},"left":{"type":"StringLiteral","start":438,"end":457,"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":35}},"extra":{"rawValue":"Source Bucket key","raw":"\"Source Bucket key\""},"value":"Source Bucket key"},"operator":"+","right":{"type":"Identifier","start":458,"end":464,"loc":{"start":{"line":15,"column":36},"end":{"line":15,"column":42},"identifierName":"srcKey"},"name":"srcKey"}}]},"trailingComments":[{"type":"CommentLine","value":"Get uploade Image type","start":472,"end":496,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":28}}}]},{"type":"VariableDeclaration","start":501,"end":541,"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":44}},"declarations":[{"type":"VariableDeclarator","start":505,"end":540,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":43}},"id":{"type":"Identifier","start":505,"end":514,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":17},"identifierName":"typeMatch"},"name":"typeMatch","leadingComments":null},"init":{"type":"CallExpression","start":517,"end":540,"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":43}},"callee":{"type":"MemberExpression","start":517,"end":526,"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":29}},"object":{"type":"Identifier","start":517,"end":520,"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":23},"identifierName":"src"},"name":"src"},"property":{"type":"Identifier","start":521,"end":526,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":29},"identifierName":"match"},"name":"match"},"computed":false},"arguments":[{"type":"RegExpLiteral","start":527,"end":539,"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":42}},"extra":{"raw":"/\\.([^.]*)$/"},"pattern":"\\.([^.]*)$","flags":""}]},"leadingComments":null}],"kind":"var","leadingComments":[{"type":"CommentLine","value":"Get uploade Image type","start":472,"end":496,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":28}}}],"trailingComments":[{"type":"CommentLine","value":"No image type to determine","start":547,"end":575,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":32}}}]},{"type":"IfStatement","start":580,"end":673,"loc":{"start":{"line":21,"column":4},"end":{"line":24,"column":5}},"test":{"type":"UnaryExpression","start":583,"end":593,"loc":{"start":{"line":21,"column":7},"end":{"line":21,"column":17}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":584,"end":593,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":17},"identifierName":"typeMatch"},"name":"typeMatch","leadingComments":null},"extra":{"parenthesizedArgument":false},"leadingComments":null},"consequent":{"type":"BlockStatement","start":594,"end":673,"loc":{"start":{"line":21,"column":18},"end":{"line":24,"column":5}},"body":[{"type":"ExpressionStatement","start":604,"end":651,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":55}},"expression":{"type":"CallExpression","start":604,"end":650,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":54}},"callee":{"type":"Identifier","start":604,"end":612,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":16},"identifierName":"callback"},"name":"callback"},"arguments":[{"type":"StringLiteral","start":613,"end":649,"loc":{"start":{"line":22,"column":17},"end":{"line":22,"column":53}},"extra":{"rawValue":"Could not determine the image type","raw":"\"Could not determine the image type\""},"value":"Could not determine the image type"}]}},{"type":"ReturnStatement","start":660,"end":667,"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":15}},"argument":null}],"directives":[]},"alternate":null,"leadingComments":[{"type":"CommentLine","value":"No image type to determine","start":547,"end":575,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":32}}}]},{"type":"ExpressionStatement","start":678,"end":714,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":40}},"expression":{"type":"CallExpression","start":678,"end":713,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":39}},"callee":{"type":"MemberExpression","start":678,"end":689,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":15}},"object":{"type":"Identifier","start":678,"end":685,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":11},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":686,"end":689,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":15},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"BinaryExpression","start":690,"end":712,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":38}},"left":{"type":"StringLiteral","start":690,"end":702,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":28}},"extra":{"rawValue":"Image type","raw":"\"Image type\""},"value":"Image type"},"operator":"+","right":{"type":"Identifier","start":703,"end":712,"loc":{"start":{"line":25,"column":29},"end":{"line":25,"column":38},"identifierName":"typeMatch"},"name":"typeMatch"}}]},"trailingComments":[{"type":"CommentLine","value":"Image type is not supported","start":720,"end":749,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}}}]},{"type":"VariableDeclaration","start":754,"end":783,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":33}},"declarations":[{"type":"VariableDeclarator","start":758,"end":782,"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":32}},"id":{"type":"Identifier","start":758,"end":767,"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":17},"identifierName":"imageType"},"name":"imageType","leadingComments":null},"init":{"type":"MemberExpression","start":770,"end":782,"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":32}},"object":{"type":"Identifier","start":770,"end":779,"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":29},"identifierName":"typeMatch"},"name":"typeMatch"},"property":{"type":"NumericLiteral","start":780,"end":781,"loc":{"start":{"line":28,"column":30},"end":{"line":28,"column":31}},"extra":{"rawValue":1,"raw":"1"},"value":1},"computed":true},"leadingComments":null}],"kind":"var","leadingComments":[{"type":"CommentLine","value":"Image type is not supported","start":720,"end":749,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}}}]},{"type":"IfStatement","start":788,"end":915,"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},"test":{"type":"LogicalExpression","start":792,"end":832,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":48}},"left":{"type":"BinaryExpression","start":792,"end":810,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":26}},"left":{"type":"Identifier","start":792,"end":801,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":17},"identifierName":"imageType"},"name":"imageType"},"operator":"!=","right":{"type":"StringLiteral","start":805,"end":810,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":26}},"extra":{"rawValue":"jpg","raw":"\"jpg\""},"value":"jpg"}},"operator":"&&","right":{"type":"BinaryExpression","start":814,"end":832,"loc":{"start":{"line":29,"column":30},"end":{"line":29,"column":48}},"left":{"type":"Identifier","start":814,"end":823,"loc":{"start":{"line":29,"column":30},"end":{"line":29,"column":39},"identifierName":"imageType"},"name":"imageType"},"operator":"!=","right":{"type":"StringLiteral","start":827,"end":832,"loc":{"start":{"line":29,"column":43},"end":{"line":29,"column":48}},"extra":{"rawValue":"png","raw":"\"png\""},"value":"png"}}},"consequent":{"type":"BlockStatement","start":834,"end":915,"loc":{"start":{"line":29,"column":50},"end":{"line":32,"column":5}},"body":[{"type":"ExpressionStatement","start":844,"end":893,"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":57}},"expression":{"type":"CallExpression","start":844,"end":892,"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":56}},"callee":{"type":"Identifier","start":844,"end":852,"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":16},"identifierName":"callback"},"name":"callback"},"arguments":[{"type":"StringLiteral","start":853,"end":891,"loc":{"start":{"line":30,"column":17},"end":{"line":30,"column":55}},"extra":{"rawValue":"Unsupported image type: ${imageType}","raw":"'Unsupported image type: ${imageType}'"},"value":"Unsupported image type: ${imageType}"}]}},{"type":"ReturnStatement","start":902,"end":909,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":15}},"argument":null}],"directives":[]},"alternate":null},{"type":"ExpressionStatement","start":925,"end":1445,"loc":{"start":{"line":34,"column":4},"end":{"line":51,"column":11}},"expression":{"type":"CallExpression","start":925,"end":1444,"loc":{"start":{"line":34,"column":4},"end":{"line":51,"column":10}},"callee":{"type":"MemberExpression","start":925,"end":1362,"loc":{"start":{"line":34,"column":4},"end":{"line":49,"column":14}},"object":{"type":"CallExpression","start":925,"end":1347,"loc":{"start":{"line":34,"column":4},"end":{"line":48,"column":10}},"callee":{"type":"MemberExpression","start":925,"end":1070,"loc":{"start":{"line":34,"column":4},"end":{"line":40,"column":13}},"object":{"type":"CallExpression","start":925,"end":1056,"loc":{"start":{"line":34,"column":4},"end":{"line":39,"column":18}},"callee":{"type":"MemberExpression","start":925,"end":1054,"loc":{"start":{"line":34,"column":4},"end":{"line":39,"column":16}},"object":{"type":"CallExpression","start":925,"end":1037,"loc":{"start":{"line":34,"column":4},"end":{"line":38,"column":6}},"callee":{"type":"MemberExpression","start":925,"end":937,"loc":{"start":{"line":34,"column":4},"end":{"line":34,"column":16}},"object":{"type":"Identifier","start":925,"end":927,"loc":{"start":{"line":34,"column":4},"end":{"line":34,"column":6},"identifierName":"s3"},"name":"s3"},"property":{"type":"Identifier","start":928,"end":937,"loc":{"start":{"line":34,"column":7},"end":{"line":34,"column":16},"identifierName":"putObject"},"name":"putObject"},"computed":false},"arguments":[{"type":"ObjectExpression","start":938,"end":1036,"loc":{"start":{"line":34,"column":17},"end":{"line":38,"column":5}},"properties":[{"type":"ObjectProperty","start":948,"end":962,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":22}},"method":false,"key":{"type":"StringLiteral","start":948,"end":954,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":14}},"extra":{"rawValue":"Body","raw":"\"Body\""},"value":"Body"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":956,"end":962,"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":22}},"extra":{"rawValue":"data","raw":"\"data\""},"value":"data"}},{"type":"ObjectProperty","start":972,"end":1002,"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":38}},"method":false,"key":{"type":"StringLiteral","start":972,"end":980,"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":16}},"extra":{"rawValue":"Bucket","raw":"\"Bucket\""},"value":"Bucket"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":982,"end":1002,"loc":{"start":{"line":36,"column":18},"end":{"line":36,"column":38}},"extra":{"rawValue":"hiru.sampleresized","raw":"\"hiru.sampleresized\""},"value":"hiru.sampleresized"}},{"type":"ObjectProperty","start":1012,"end":1030,"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":26}},"method":false,"key":{"type":"StringLiteral","start":1012,"end":1017,"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":13}},"extra":{"rawValue":"Key","raw":"\"Key\""},"value":"Key"},"computed":false,"shorthand":false,"value":{"type":"StringLiteral","start":1019,"end":1030,"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":26}},"extra":{"rawValue":"samplekey","raw":"\"samplekey\""},"value":"samplekey"}}]}]},"property":{"type":"Identifier","start":1047,"end":1054,"loc":{"start":{"line":39,"column":9},"end":{"line":39,"column":16},"identifierName":"promise"},"name":"promise"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":1066,"end":1070,"loc":{"start":{"line":40,"column":9},"end":{"line":40,"column":13},"identifierName":"then"},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1071,"end":1346,"loc":{"start":{"line":40,"column":14},"end":{"line":48,"column":9}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":1071,"end":1075,"loc":{"start":{"line":40,"column":14},"end":{"line":40,"column":18},"identifierName":"data"},"name":"data"}],"body":{"type":"BlockStatement","start":1079,"end":1346,"loc":{"start":{"line":40,"column":22},"end":{"line":48,"column":9}},"body":[{"type":"ExpressionStatement","start":1093,"end":1111,"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":30}},"expression":{"type":"CallExpression","start":1093,"end":1110,"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":29}},"callee":{"type":"MemberExpression","start":1093,"end":1104,"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":23}},"object":{"type":"Identifier","start":1093,"end":1100,"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":19},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":1101,"end":1104,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":23},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"Identifier","start":1105,"end":1109,"loc":{"start":{"line":41,"column":24},"end":{"line":41,"column":28},"identifierName":"data"},"name":"data"}]},"trailingComments":[{"type":"CommentLine","value":" successful response","start":1122,"end":1144,"loc":{"start":{"line":41,"column":41},"end":{"line":41,"column":63}}},{"type":"CommentBlock","value":"\n            data = {\n                ETag: \"\\\\\"6805f2cfc46c0f04559748bb039d69ae\\\\\"\", \n                VersionId: \"pSKidl4pHBiNwukdbcPXAIs.sshFFOc0\"\n            }\n            ","start":1157,"end":1336,"loc":{"start":{"line":42,"column":12},"end":{"line":47,"column":14}}}]}],"directives":[]},"trailingComments":[{"type":"CommentLine","value":" successful response","start":1122,"end":1144,"loc":{"start":{"line":41,"column":41},"end":{"line":41,"column":63}}},{"type":"CommentBlock","value":"\n            data = {\n                ETag: \"\\\\\"6805f2cfc46c0f04559748bb039d69ae\\\\\"\", \n                VersionId: \"pSKidl4pHBiNwukdbcPXAIs.sshFFOc0\"\n            }\n            ","start":1157,"end":1336,"loc":{"start":{"line":42,"column":12},"end":{"line":47,"column":14}}}]}]},"property":{"type":"Identifier","start":1357,"end":1362,"loc":{"start":{"line":49,"column":9},"end":{"line":49,"column":14},"identifierName":"catch"},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1363,"end":1443,"loc":{"start":{"line":49,"column":15},"end":{"line":51,"column":9}},"id":null,"generator":false,"async":false,"params":[{"type":"Identifier","start":1363,"end":1366,"loc":{"start":{"line":49,"column":15},"end":{"line":49,"column":18},"identifierName":"err"},"name":"err"}],"body":{"type":"BlockStatement","start":1370,"end":1443,"loc":{"start":{"line":49,"column":22},"end":{"line":51,"column":9}},"body":[{"type":"ExpressionStatement","start":1384,"end":1412,"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":40}},"expression":{"type":"CallExpression","start":1384,"end":1411,"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":39}},"callee":{"type":"MemberExpression","start":1384,"end":1395,"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":23}},"object":{"type":"Identifier","start":1384,"end":1391,"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":19},"identifierName":"console"},"name":"console"},"property":{"type":"Identifier","start":1392,"end":1395,"loc":{"start":{"line":50,"column":20},"end":{"line":50,"column":23},"identifierName":"log"},"name":"log"},"computed":false},"arguments":[{"type":"Identifier","start":1396,"end":1399,"loc":{"start":{"line":50,"column":24},"end":{"line":50,"column":27},"identifierName":"err"},"name":"err"},{"type":"MemberExpression","start":1401,"end":1410,"loc":{"start":{"line":50,"column":29},"end":{"line":50,"column":38}},"object":{"type":"Identifier","start":1401,"end":1404,"loc":{"start":{"line":50,"column":29},"end":{"line":50,"column":32},"identifierName":"err"},"name":"err"},"property":{"type":"Identifier","start":1405,"end":1410,"loc":{"start":{"line":50,"column":33},"end":{"line":50,"column":38},"identifierName":"stack"},"name":"stack"},"computed":false}]},"trailingComments":[{"type":"CommentLine","value":" an error occurred","start":1413,"end":1433,"loc":{"start":{"line":50,"column":41},"end":{"line":50,"column":61}}}]}],"directives":[]},"trailingComments":[{"type":"CommentLine","value":" an error occurred","start":1413,"end":1433,"loc":{"start":{"line":50,"column":41},"end":{"line":50,"column":61}}}]}]}}],"directives":[]}}}}],"directives":[]},"comments":[{"type":"CommentLine","value":"Entered in to Lambda","start":116,"end":138,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":26}}},{"type":"CommentLine","value":"Get source folder name","start":184,"end":208,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":28}}},{"type":"CommentLine","value":"Get source key","start":267,"end":283,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":20}}},{"type":"CommentLine","value":"Get uploade Image type","start":472,"end":496,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":28}}},{"type":"CommentLine","value":"No image type to determine","start":547,"end":575,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":32}}},{"type":"CommentLine","value":"Image type is not supported","start":720,"end":749,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}}},{"type":"CommentLine","value":" successful response","start":1122,"end":1144,"loc":{"start":{"line":41,"column":41},"end":{"line":41,"column":63}}},{"type":"CommentBlock","value":"\n            data = {\n                ETag: \"\\\\\"6805f2cfc46c0f04559748bb039d69ae\\\\\"\", \n                VersionId: \"pSKidl4pHBiNwukdbcPXAIs.sshFFOc0\"\n            }\n            ","start":1157,"end":1336,"loc":{"start":{"line":42,"column":12},"end":{"line":47,"column":14}}},{"type":"CommentLine","value":" an error occurred","start":1413,"end":1433,"loc":{"start":{"line":50,"column":41},"end":{"line":50,"column":61}}}]},"formatted":true,"resources":["s3hirusample","s3hirusampleresized","apigusEast1hiruS3Samplesamplepost"],"triggers":["s3hirusample","apigusEast1hiruS3Samplesamplepost"]}},"rootNode":"4a7438ea-0941-4df6-93c6-ad299b87b156","openFiles":["c1027809-aa5d-4f6b-b668-882a7e827eb9"],"currentFileId":"c1027809-aa5d-4f6b-b668-882a7e827eb9","resources":{"s3hirusample":{"name":"s3hirusample","type":"S3","config":{"mode":1,"bucket":{"region":"us-east-1","name":"hiru.sample"},"trigger":{"type":"s3:ObjectCreated:*","keyPrefix":"","keySuffix":""}},"usage":{}},"s3hirusampleresized":{"name":"s3hirusampleresized","type":"S3","config":{"mode":1,"bucket":{"region":"us-east-1","name":"hiru.sampleresized"},"operation":"PUT_OBJECT"},"usage":{"c1027809-aa5d-4f6b-b668-882a7e827eb9":{"operations":{"putObject":1},"occurrence":1}}},"apigusEast1hiruS3Samplesamplepost":{"name":"apigusEast1hiruS3Samplesamplepost","type":"API_GATEWAY","config":{"selectedRegion":"us-east-1","apiMode":0,"apiName":"hiruS3Sample","endpointType":"EDGE","resourceMode":0,"resourceName":"sample","resourcePath":"/sample","restMethod":"POST"},"usage":{}}},"state":"CHANGED","triggers":["s3hirusample","apigusEast1hiruS3Samplesamplepost"],"packageJSON":{"dependencies":{"aws-sdk":"2.176.0"}},"startX":230,"startY":147},"PROJECT_META":{"projectName":"S3TutorialAmazon","projectDescription":"This project follows the Amazon tutorial of S3 with lambda","projectVersion":"1.0.0","repoName":"S3TutorialAmazon","repoUrl":"https://github.com/hirudinee/S3TutorialAmazon"}}